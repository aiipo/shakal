(this.webpackJsonpshakal=this.webpackJsonpshakal||[]).push([[0],{29:function(e,n,t){},44:function(e,n,t){},51:function(e,n){},52:function(e,n){},53:function(e,n){},57:function(e,n,t){},58:function(e,n,t){},59:function(e,n,t){},60:function(e,n,t){},61:function(e,n,t){"use strict";t.r(n);var a=t(0),c=t.n(a),i=t(7),r=t.n(i),s=t(4),l=(t(29),t(1)),o=function(){return Object(l.jsx)("header",{className:"header",children:Object(l.jsx)("div",{className:"wrapper",children:Object(l.jsx)(s.b,{to:"/",children:Object(l.jsx)("h1",{children:"SHAKAL"})})})})},u=t(14),d=t(21),j=t(8),m=t(22),f=t.n(m),p=t(15),b=t(24);t(44);var v=function(e){var n=e.children,t=e.className,a=void 0===t?"":t,c=e.type,i=void 0===c?"button":c,r=e.onClick,o=void 0===r?function(){}:r,u=e.disabled,d=void 0!==u&&u,j=Object(b.a)(e,["children","className","type","onClick","disabled"]),m=j.href?s.b:"button";return Object(l.jsx)(m,Object(p.a)(Object(p.a)({className:"button ".concat(a),onClick:function(e){return d?e.preventDefault():o()},disabled:d,type:i,to:j.href},j),{},{children:n}))},h=t(23),O=t.n(h),g=(t(56),t(57),{ESC:"Escape"}),x=(t(58),c.a.forwardRef((function(e,n){var t,c=e.elements,r=e.clear,s=Object(a.useRef)(null);return Object(a.useEffect)((function(){var e=function(e){e.key===g.ESC&&r()};return window.addEventListener("keyup",e,!1),function(){window.removeEventListener("keyup",e,!1)}}),[]),null!==(t=(null===c||void 0===c?void 0:c.length)>0&&(null===n||void 0===n?void 0:n.current)&&Object(i.createPortal)(Object(l.jsx)("div",{className:"result",onClick:function(e){var n=e.target;s.current.contains(n)||r()},children:Object(l.jsxs)("ul",{className:"result__container",ref:s,children:[Object(l.jsx)("div",{className:"result__header",children:Object(l.jsx)("span",{className:"result__close",onClick:r,tabIndex:"1",children:"x"})}),null===c||void 0===c?void 0:c.map((function(e,n){var t=e.accuracy,a=e.person;return Object(l.jsxs)("li",{className:"result__element",children:[Object(l.jsxs)("span",{className:"result__person",children:[Object(l.jsx)("small",{children:n+1}),". ",a]}),Object(l.jsxs)("span",{className:"result__accuracy",children:[t,"%"]})]},n)}))]})}),n.current))&&void 0!==t?t:null})));var _=function(e){var n=e.serverUrl,t=void 0===n?"":n,c=Object(a.useRef)(null),i=Object(a.useRef)(null),r=Object(a.useRef)(null),s=Object(a.useState)([]),o=Object(j.a)(s,2),m=o[0],p=o[1],b=Object(a.useState)(null),h=Object(j.a)(b,2),g=h[0],_=h[1],N=Object(a.useState)([]),w=Object(j.a)(N,2),k=w[0],y=w[1],C=function(e){e.preventDefault(),e.stopPropagation();var n,t=(e.dataTransfer||i.current).files,a=Object(d.a)(t);try{var c=function(){var e=n.value;if(e.type.startsWith("image/")&&!m.find((function(n){return n.name===e.name}))){var t=new FileReader;t.addEventListener("load",(function(n){var t=n.target.result;p([].concat(Object(u.a)(m),[{image:t,name:e.name}]))}),!1),t.readAsDataURL(e)}};for(a.s();!(n=a.n()).done;)c()}catch(r){a.e(r)}finally{a.f()}},S=function(e){return function(){p(m.filter((function(n){return n!==e})))}};return Object(l.jsxs)("form",{ref:c,className:"upload-image wrapper",name:"upload-image",onSubmit:function(e){e.preventDefault(),e.stopPropagation(),f.a.post(t).send({images:m}).then((function(e){return y(e.body)})).catch((function(e){return console.log(e)}))},onDrop:C,onDragOver:function(e){e.preventDefault(),e.stopPropagation()},children:[Object(l.jsx)(x,{elements:k,ref:c,clear:function(){return y([])}}),Object(l.jsxs)("div",{className:"upload-image__controls",children:[g&&Object(l.jsx)(v,{className:"upload-image__preview-save",onClick:function(){var e=r.current.imageEditorInst.toDataURL();e&&p((function(n){var t=n.find((function(e){return e===g}));return t.image=e,_(null),[].concat(Object(u.a)(n.filter((function(e){return e!==g}))),[t])}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(l.jsxs)("div",{className:"upload-image__select-container",children:[Object(l.jsxs)(v,{className:"upload-image__select-button",onClick:function(){var e;null===(e=i.current)||void 0===e||e.click()},children:["\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438",Object(l.jsx)("input",{ref:i,className:"hide",type:"file",multiple:!0,accept:"image/jpeg",onChange:C})]}),Object(l.jsx)("span",{children:"\u0418\u043b\u0438 \u043f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0444\u0430\u0439\u043b\u044b"})]}),m.length>0&&Object(l.jsx)(v,{type:"submit",className:"upload-image__send-button",children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u2192"})]}),Object(l.jsxs)("div",{className:"upload-image__content",children:[Object(l.jsx)("div",{className:"upload-image__preview-container",children:m.map((function(e){return Object(l.jsxs)("div",{className:"upload-image__preview",children:[Object(l.jsxs)("div",{className:"upload-image__preview-controls",children:[Object(l.jsx)(v,{className:"upload-image__preview-edit",onClick:function(){return _(e)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(l.jsx)(v,{className:"upload-image__preview-remove",onClick:S(e),children:"X"})]}),Object(l.jsx)("img",{src:e.image,className:"upload-image__preview-image",alt:""}),Object(l.jsx)("span",{className:"upload-image__preview-name",children:e.name})]},e.name)}))}),Object(l.jsx)("div",{className:"upload-image__editor",children:g&&Object(l.jsx)(O.a,{ref:r,includeUI:{loadImage:{path:g.image,name:g.name},menu:["crop","flip","rotate","filter"]},usageStatistics:!1})})]})]})};t(59);var N=function(){return Object(l.jsx)(s.a,{children:Object(l.jsxs)("div",{className:"app",children:[Object(l.jsx)(o,{}),Object(l.jsx)(_,{serverUrl:"".concat("http://localhost:9000","/api/images")})]})})},w=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,62)).then((function(n){var t=n.getCLS,a=n.getFID,c=n.getFCP,i=n.getLCP,r=n.getTTFB;t(e),a(e),c(e),i(e),r(e)}))};t(60);r.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),w()}},[[61,1,2]]]);
//# sourceMappingURL=main.87c069e8.chunk.js.map