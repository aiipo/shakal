(this.webpackJsonpshakal=this.webpackJsonpshakal||[]).push([[0],{285:function(e,t){},286:function(e,t){},294:function(e,t){},297:function(e,t){},298:function(e,t){},300:function(e,t,n){},306:function(e,t,n){},307:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var r=n(31),a=n.n(r),c=n(244),u=n.n(c),o=n(4),i=n.n(o),s=n(11),f=n(6),l=n(194),d=n(245),p=n.n(d),v=n(199),j=(n(308),n(299)),b=a.a.forwardRef((function(e,t){var n=Object(r.useRef)(null),a=Object(r.useRef)(null),c=Object(r.useState)([]),u=Object(f.a)(c,2),o=u[0],l=u[1],d=function(){var e;return null===(e=n.current)||void 0===e?void 0:e.toDataURL("image/jpeg",1)},p=function(e){if(e instanceof Array)return e.map((function(e){var t=document.createElement("canvas");return t.getContext("2d").putImageData(e,0,0),t.toDataURL()}))},b=function(){var e=Object(s.a)(i.a.mark((function e(t){var r,c,u,o,s,d,v,j,b,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.current&&n.current&&t){e.next=2;break}return e.abrupt("return");case 2:return!1,e.next=5,a.current.estimateFaces(t,false);case 5:if(r=e.sent,c=[],r.length>0)for(u=0;u<r.length;u++)o=Object(f.a)(r[u].topLeft,2),s=o[0],d=o[1],v=r[u].bottomRight,j=v[0]-s,b=v[1]-d,h=n.current.getContext("2d"),c.push(h.getImageData(s,d,j,b)),h.fillStyle="rgb(184,22,22)",h.fillRect(s,d,j,b);l(p(c));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(s.a)(i.a.mark((function e(t){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return null===(r=n.current)||void 0===r||null===(a=r.getContext("2d"))||void 0===a||a.drawImage(t,0,0,n.current.width,n.current.height),e.next=4,b(t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n.current=document.createElement("canvas"),Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.load();case 2:a.current=e.sent;case 3:case"end":return e.stop()}}),e)})))()}),[]),Object(r.useImperativeHandle)(t,(function(){return Object(v.a)(Object(v.a)({},n.current),{},{canvasToImage:d,drawOnCanvas:h,faces:o})})),null})),h=(n(300),n(56)),O=function(){return Object(h.jsx)("header",{className:"header",children:Object(h.jsx)("div",{className:"wrapper",children:Object(h.jsx)(l.b,{to:"/",children:Object(h.jsx)("h1",{children:"SHAKAL"})})})})};n(306);var g=function(){var e,t=Object(r.useRef)(null),n=Object(r.useState)(!0),a=Object(f.a)(n,2),c=a[0],u=a[1],o=function(){var e=Object(s.a)(i.a.mark((function e(n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target,!c){e.next=4;break}return e.next=4,null===(a=t.current)||void 0===a?void 0:a.drawOnCanvas(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){return u(!1)};return Object(h.jsx)(l.a,{children:Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(O,{}),Object(h.jsx)("video",{controls:!0,crossOrigin:"anonymous",onTimeUpdate:o,onPlay:function(){e=setInterval(Object(s.a)(i.a.mark((function e(){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.current&&(null===(r=null===(n=t.current)||void 0===n?void 0:n.faces)||void 0===r?void 0:r.length)&&p.a.post("".concat("http://localhost:9000","/api/video")).send(r).then((function(e){return console.log(e.body)})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)}))),500)},onWaiting:d,onSeeking:d,onLoadedData:function(){return u(!0)},onPause:function(){return clearInterval(e)},className:"app__video",children:Object(h.jsx)("source",{src:"https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/TearsOfSteel.mp4"})}),Object(h.jsx)(b,{ref:t})]})})},m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,310)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))};n(307);u.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root")),m()}},[[309,1,2]]]);
//# sourceMappingURL=main.ba6f19df.chunk.js.map